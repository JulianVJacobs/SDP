{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{vep6:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class MealsPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),ionic_angular_ngfactory=__webpack_require__(\"MKJQ\"),ionic_angular=__webpack_require__(\"sZkV\"),fesm2015_forms=__webpack_require__(\"s7LF\"),common=__webpack_require__(\"SVse\"),toast_service=__webpack_require__(\"2g2N\"),storage_service=__webpack_require__(\"n90K\"),index_cjs=__webpack_require__(\"wj3C\");__webpack_require__(\"LOEa\");class meals_page_MealsPage{constructor(router,firestore,auth,toastService,storageService){this.router=router,this.firestore=firestore,this.auth=auth,this.toastService=toastService,this.storageService=storageService,this.menu=[],this.review=!1,this.data={uid:\"\",Rating:3,Date:\"\",\"Posted By\":\"\",Time:new Number,Comment:\"\"},this.dh=\"\"}ngOnInit(){this.dh=history.state[\"Dining Hall\"],this.firestore.firestore.collection(\"Dining Halls\").doc(this.dh).get().then(res=>{for(var meal in res.data())this.firestore.firestore.collection(\"Dining Halls/\"+this.dh+\"/Meals\").doc(res.data()[meal]).get().then(res=>{this.menu.push(res.data())}).catch(error=>{console.dir(error)})}).catch(error=>{console.dir(error)})}orderAction(item){var today=new Date,data={Time:today.getTime(),Date:today.getFullYear()+\"-\"+(today.getMonth()+1)+\"-\"+today.getDate(),uid:index_cjs.firebase.auth().currentUser.uid};this.firestore.firestore.collection(\"Dining Halls/\"+this.dh+\"/Meals/\"+item+\"/Order\").doc().set(data).then(()=>{this.toastService.presentToast(\"Order Placed\")}).catch(error=>{console.dir(error)})}submit(meal){var today=new Date;this.data.Time=today.getTime(),this.data.Date=today.getFullYear()+\"-\"+(today.getMonth()+1)+\"-\"+today.getDate(),this.auth.currentUser.then(res=>{this.data.uid=res.uid,this.storageService.get(res.uid).then(res=>{this.data[\"Posted By\"]=res[\"Student Number\"],this.firestore.firestore.collection(\"Dining Halls/\"+this.dh+\"/Meals/\"+meal+\"/Comments\").doc().set(this.data),this.firestore.firestore.collection(\"Dining Halls/\"+this.dh+\"/Meals/\").doc(meal).get().then(res=>{var u=res.data();u.ratings.push(this.data.Rating),u[\"Average Rating\"]=0,u.ratings.forEach(v=>{u[\"Average Rating\"]+=v}),u[\"Average Rating\"]/=u.ratings.length,u.uid=this.data[\"Posted By\"],this.firestore.firestore.collection(\"Dining Halls/\"+this.dh+\"/Meals/\").doc(meal).update({uid:u.uid,ratings:u.ratings,\"Average Rating\":u[\"Average Rating\"]}).catch(err=>{console.dir(err)}),this.toastService.presentToast(\"Review submitted.\"),this.router.navigate([\"main\"])}).catch(error=>{console.dir(\"error\",error)})}).catch(error=>{console.dir(\"error\",error)})}).catch(error=>{console.dir(\"error\",error)})}}var router=__webpack_require__(\"iInd\"),angular_fire_firestore=__webpack_require__(\"wD+u\"),angular_fire_auth=__webpack_require__(\"VRCc\"),RenderType_MealsPage=core.ob({encapsulation:0,styles:[[\".actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:9px;--box-shadow:none;--background:linear-gradient(60deg, #D4AF37 0%, #416 100%);font-size:12px}\"]],data:{}});function View_MealsPage_2(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,3,\"div\",[],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,2,\"ion-button\",[[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"click\"===en&&(ad=0!=(_co.review=!_co.review)&&ad),ad}),ionic_angular_ngfactory.G,ionic_angular_ngfactory.b)),core.pb(2,49152,null,0,ionic_angular.h,[core.h,core.k,core.x],{expand:[0,\"expand\"]},null),(_l()(),core.Gb(-1,0,[\"Make Review\"]))],(function(_ck,_v){_ck(_v,2,0,\"block\")}),null)}function View_MealsPage_3(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,34,\"ion-list\",[],null,null,null,ionic_angular_ngfactory.V,ionic_angular_ngfactory.q)),core.pb(1,49152,null,0,ionic_angular.L,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,15,\"ion-item\",[],null,null,null,ionic_angular_ngfactory.T,ionic_angular_ngfactory.o)),core.pb(3,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],null,null),(_l()(),core.qb(4,0,null,0,4,\"ion-label\",[[\"position\",\"stacked\"]],null,null,null,ionic_angular_ngfactory.U,ionic_angular_ngfactory.p)),core.pb(5,49152,null,0,ionic_angular.K,[core.h,core.k,core.x],{position:[0,\"position\"]},null),(_l()(),core.Gb(-1,0,[\"Write a short comment \"])),(_l()(),core.qb(7,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.Gb(-1,0,[\"(fewer than 50 charecters)\"])),(_l()(),core.qb(9,0,null,0,8,\"ion-input\",[[\"maxlength\",\"50\"],[\"type\",\"text\"]],[[1,\"maxlength\",0],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,12)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,12)._handleInputEvent($event.target)&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.data.Comment=$event)&&ad),ad}),ionic_angular_ngfactory.S,ionic_angular_ngfactory.n)),core.pb(10,540672,null,0,fesm2015_forms.c,[],{maxlength:[0,\"maxlength\"]},null),core.Db(1024,null,fesm2015_forms.d,(function(p0_0){return[p0_0]}),[fesm2015_forms.c]),core.pb(12,4341760,null,0,ionic_angular.Gb,[core.p,core.k],null,null),core.Db(1024,null,fesm2015_forms.e,(function(p0_0){return[p0_0]}),[ionic_angular.Gb]),core.pb(14,671744,null,0,fesm2015_forms.j,[[8,null],[6,fesm2015_forms.d],[8,null],[6,fesm2015_forms.e]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Db(2048,null,fesm2015_forms.f,null,[fesm2015_forms.j]),core.pb(16,16384,null,0,fesm2015_forms.g,[[4,fesm2015_forms.f]],null,null),core.pb(17,49152,null,0,ionic_angular.D,[core.h,core.k,core.x],{maxlength:[0,\"maxlength\"],type:[1,\"type\"]},null),(_l()(),core.qb(18,0,null,0,16,\"ion-item\",[],null,null,null,ionic_angular_ngfactory.T,ionic_angular_ngfactory.o)),core.pb(19,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],null,null),(_l()(),core.qb(20,0,null,0,3,\"ion-label\",[[\"position\",\"stacked\"]],null,null,null,ionic_angular_ngfactory.U,ionic_angular_ngfactory.p)),core.pb(21,49152,null,0,ionic_angular.K,[core.h,core.k,core.x],{position:[0,\"position\"]},null),(_l()(),core.Gb(-1,0,[\"Rate the meal \"])),(_l()(),core.qb(23,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.qb(24,0,null,0,10,\"ion-range\",[[\"color\",\"warning\"],[\"max\",\"5\"],[\"min\",\"1\"],[\"pin\",\"true\"],[\"snaps\",\"\"],[\"step\",\"1\"],[\"value\",\"3\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"ionBlur\"===en&&(ad=!1!==core.Cb(_v,25)._handleBlurEvent($event.target)&&ad),\"ionChange\"===en&&(ad=!1!==core.Cb(_v,25)._handleChangeEvent($event.target)&&ad),\"ngModelChange\"===en&&(ad=!1!==(_co.data.Rating=$event)&&ad),ad}),ionic_angular_ngfactory.Z,ionic_angular_ngfactory.u)),core.pb(25,4341760,null,0,ionic_angular.Fb,[core.p,core.k],null,null),core.Db(1024,null,fesm2015_forms.e,(function(p0_0){return[p0_0]}),[ionic_angular.Fb]),core.pb(27,671744,null,0,fesm2015_forms.j,[[8,null],[8,null],[8,null],[6,fesm2015_forms.e]],{model:[0,\"model\"]},{update:\"ngModelChange\"}),core.Db(2048,null,fesm2015_forms.f,null,[fesm2015_forms.j]),core.pb(29,16384,null,0,fesm2015_forms.g,[[4,fesm2015_forms.f]],null,null),core.pb(30,49152,null,0,ionic_angular.W,[core.h,core.k,core.x],{color:[0,\"color\"],max:[1,\"max\"],min:[2,\"min\"],pin:[3,\"pin\"],snaps:[4,\"snaps\"],step:[5,\"step\"],value:[6,\"value\"]},null),(_l()(),core.qb(31,0,null,0,1,\"ion-icon\",[[\"color\",\"warning\"],[\"name\",\"thumbs-down\"],[\"slot\",\"start\"]],null,null,null,ionic_angular_ngfactory.R,ionic_angular_ngfactory.m)),core.pb(32,49152,null,0,ionic_angular.z,[core.h,core.k,core.x],{color:[0,\"color\"],name:[1,\"name\"]},null),(_l()(),core.qb(33,0,null,0,1,\"ion-icon\",[[\"color\",\"warning\"],[\"name\",\"thumbs-up\"],[\"slot\",\"end\"]],null,null,null,ionic_angular_ngfactory.R,ionic_angular_ngfactory.m)),core.pb(34,49152,null,0,ionic_angular.z,[core.h,core.k,core.x],{color:[0,\"color\"],name:[1,\"name\"]},null),(_l()(),core.qb(35,0,null,null,2,\"ion-button\",[[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"click\"===en&&(_co.review=!_co.review,ad=!1!==_co.submit(_v.parent.context.$implicit.name)&&ad),ad}),ionic_angular_ngfactory.G,ionic_angular_ngfactory.b)),core.pb(36,49152,null,0,ionic_angular.h,[core.h,core.k,core.x],{expand:[0,\"expand\"]},null),(_l()(),core.Gb(-1,0,[\"Submit\"]))],(function(_ck,_v){var _co=_v.component;_ck(_v,5,0,\"stacked\"),_ck(_v,10,0,\"50\"),_ck(_v,14,0,_co.data.Comment),_ck(_v,17,0,\"50\",\"text\"),_ck(_v,21,0,\"stacked\"),_ck(_v,27,0,_co.data.Rating),_ck(_v,30,0,\"warning\",\"5\",\"1\",\"true\",\"\",\"1\",\"3\"),_ck(_v,32,0,\"warning\",\"thumbs-down\"),_ck(_v,34,0,\"warning\",\"thumbs-up\"),_ck(_v,36,0,\"block\")}),(function(_ck,_v){_ck(_v,9,0,core.Cb(_v,10).maxlength?core.Cb(_v,10).maxlength:null,core.Cb(_v,16).ngClassUntouched,core.Cb(_v,16).ngClassTouched,core.Cb(_v,16).ngClassPristine,core.Cb(_v,16).ngClassDirty,core.Cb(_v,16).ngClassValid,core.Cb(_v,16).ngClassInvalid,core.Cb(_v,16).ngClassPending),_ck(_v,24,0,core.Cb(_v,29).ngClassUntouched,core.Cb(_v,29).ngClassTouched,core.Cb(_v,29).ngClassPristine,core.Cb(_v,29).ngClassDirty,core.Cb(_v,29).ngClassValid,core.Cb(_v,29).ngClassInvalid,core.Cb(_v,29).ngClassPending)}))}function View_MealsPage_1(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,19,\"div\",[[\"class\",\"actions\"]],null,null,null,null,null)),(_l()(),core.qb(1,0,null,null,18,\"ion-card\",[],null,null,null,ionic_angular_ngfactory.L,ionic_angular_ngfactory.d)),core.pb(2,49152,null,0,ionic_angular.j,[core.h,core.k,core.x],null,null),(_l()(),core.qb(3,0,null,0,0,\"img\",[],[[8,\"src\",4]],null,null,null,null)),(_l()(),core.qb(4,0,null,0,4,\"ion-card-header\",[],null,null,null,ionic_angular_ngfactory.J,ionic_angular_ngfactory.f)),core.pb(5,49152,null,0,ionic_angular.l,[core.h,core.k,core.x],null,null),(_l()(),core.qb(6,0,null,0,2,\"ion-card-title\",[],null,null,null,ionic_angular_ngfactory.K,ionic_angular_ngfactory.g)),core.pb(7,49152,null,0,ionic_angular.n,[core.h,core.k,core.x],null,null),(_l()(),core.Gb(8,0,[\"\",\"\"])),(_l()(),core.qb(9,0,null,0,4,\"ion-card-content\",[],null,null,null,ionic_angular_ngfactory.I,ionic_angular_ngfactory.e)),core.pb(10,49152,null,0,ionic_angular.k,[core.h,core.k,core.x],null,null),(_l()(),core.Gb(11,0,[\" \",\" \"])),(_l()(),core.qb(12,0,null,0,0,\"br\",[],null,null,null,null,null)),(_l()(),core.Gb(13,0,[\" Allergens: \",\" \"])),(_l()(),core.qb(14,0,null,0,2,\"ion-button\",[[\"expand\",\"block\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.orderAction(_v.context.$implicit.name)&&ad),ad}),ionic_angular_ngfactory.G,ionic_angular_ngfactory.b)),core.pb(15,49152,null,0,ionic_angular.h,[core.h,core.k,core.x],{expand:[0,\"expand\"]},null),(_l()(),core.Gb(-1,0,[\"Order\"])),(_l()(),core.fb(16777216,null,0,1,null,View_MealsPage_2)),core.pb(18,16384,null,0,common.i,[core.N,core.J],{ngIf:[0,\"ngIf\"],ngIfElse:[1,\"ngIfElse\"]},null),(_l()(),core.fb(0,[[\"reviewBlock\",2]],0,0,null,View_MealsPage_3))],(function(_ck,_v){var _co=_v.component;_ck(_v,15,0,\"block\"),_ck(_v,18,0,0==_co.review,core.Cb(_v,19))}),(function(_ck,_v){_ck(_v,3,0,core.ub(1,\"\",_v.context.$implicit.image,\"\")),_ck(_v,8,0,_v.context.$implicit.name),_ck(_v,11,0,_v.context.$implicit.description),_ck(_v,13,0,_v.context.$implicit.allergens)}))}function View_MealsPage_0(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,5,\"ion-content\",[[\"class\",\"ion-padding\"]],null,null,null,ionic_angular_ngfactory.N,ionic_angular_ngfactory.i)),core.pb(1,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],{fullscreen:[0,\"fullscreen\"]},null),(_l()(),core.qb(2,0,null,0,3,\"ion-list\",[],null,null,null,ionic_angular_ngfactory.V,ionic_angular_ngfactory.q)),core.pb(3,49152,null,0,ionic_angular.L,[core.h,core.k,core.x],null,null),(_l()(),core.fb(16777216,null,0,1,null,View_MealsPage_1)),core.pb(5,278528,null,0,common.h,[core.N,core.J,core.q],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,1,0,!0),_ck(_v,5,0,_co.menu)}),null)}function View_MealsPage_Host_0(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,1,\"app-meals\",[],null,null,null,View_MealsPage_0,RenderType_MealsPage)),core.pb(1,114688,null,0,meals_page_MealsPage,[router.m,angular_fire_firestore.a,angular_fire_auth.a,toast_service.a,storage_service.a],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var MealsPageNgFactory=core.mb(\"app-meals\",meals_page_MealsPage,View_MealsPage_Host_0,{},{},[]);class MealsPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"MealsPageModuleNgFactory\",(function(){return MealsPageModuleNgFactory}));var MealsPageModuleNgFactory=core.nb(MealsPageModule,[],(function(_l){return core.zb([core.Ab(512,core.j,core.Y,[[8,[router_ngfactory.a,MealsPageNgFactory]],[3,core.j],core.v]),core.Ab(4608,common.k,common.j,[core.s,[2,common.q]]),core.Ab(4608,fesm2015_forms.l,fesm2015_forms.l,[]),core.Ab(4608,ionic_angular.a,ionic_angular.a,[core.x,core.g]),core.Ab(4608,ionic_angular.Ab,ionic_angular.Ab,[ionic_angular.a,core.j,core.p]),core.Ab(4608,ionic_angular.Db,ionic_angular.Db,[ionic_angular.a,core.j,core.p]),core.Ab(1073742336,common.b,common.b,[]),core.Ab(1073742336,fesm2015_forms.k,fesm2015_forms.k,[]),core.Ab(1073742336,fesm2015_forms.b,fesm2015_forms.b,[]),core.Ab(1073742336,ionic_angular.yb,ionic_angular.yb,[]),core.Ab(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Ab(1073742336,MealsPageRoutingModule,MealsPageRoutingModule,[]),core.Ab(1073742336,MealsPageModule,MealsPageModule,[]),core.Ab(1024,router.k,(function(){return[[{path:\"\",component:meals_page_MealsPage}]]}),[])])}))}}]);","extractedComments":[]}