{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{\"0mUY\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var core=__webpack_require__(\"8Y7J\");class MessageListPageModule{}var router_ngfactory=__webpack_require__(\"pMnS\"),ionic_angular_ngfactory=__webpack_require__(\"MKJQ\"),ionic_angular=__webpack_require__(\"sZkV\"),common=__webpack_require__(\"SVse\");class MessageListPage{constructor(firestore,auth,router){this.firestore=firestore,this.auth=auth,this.router=router,this.conversations=[],this.users={}}ngOnInit(){this.auth.currentUser.then(res=>{this.firestore.firestore.collection(\"users/\"+res.uid+\"/Chats\").get().then(snap=>{snap.forEach(doc=>{doc.ref.onSnapshot(snap=>{var user={uid:\"\",name:\"\",\"Most Recent Message\":\"\"};user.uid=doc.id,user[\"Most Recent Message\"]=snap.data().Messages[snap.data().Messages.length-1],this.firestore.firestore.doc(\"users/\"+doc.id).get().then(res=>{user.name=res.data().Name+\" \"+res.data().Surname,null!=user[\"Most Recent Message\"]&&(this.users[doc.id]=user,this.conversations=Object.values(this.users))}).catch(err=>{console.dir(err)})})})}).catch(err=>{console.dir(err)})}).catch(err=>{console.dir(err)})}mainAction(item){this.router.navigateByUrl(\"message\",{state:{recipient:item.Owner}})}}var angular_fire_firestore=__webpack_require__(\"wD+u\"),angular_fire_auth=__webpack_require__(\"VRCc\"),router=__webpack_require__(\"iInd\"),RenderType_MessageListPage=core.ob({encapsulation:0,styles:[[\"ion-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;color:#416;font-style:italic;font-family:cursive}.ion-padding[_ngcontent-%COMP%]{top:20%;margin-bottom:10%}.ion-padding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:12px;color:#416}ion-button[_ngcontent-%COMP%]{position:absolute;width:80%;margin-left:5%;margin-bottom:3%;--background:#D4AF37}\"]],data:{}});function View_MessageListPage_1(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,8,\"ion-item\",[],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.mainAction(_v.context.$implicit)&&ad),ad}),ionic_angular_ngfactory.T,ionic_angular_ngfactory.o)),core.pb(1,49152,null,0,ionic_angular.E,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,1,\"ion-thumbnail\",[[\"slot\",\"start\"]],null,null,null,ionic_angular_ngfactory.hb,ionic_angular_ngfactory.C)),core.pb(3,49152,null,0,ionic_angular.tb,[core.h,core.k,core.x],null,null),(_l()(),core.qb(4,0,null,0,4,\"ion-label\",[],null,null,null,ionic_angular_ngfactory.U,ionic_angular_ngfactory.p)),core.pb(5,49152,null,0,ionic_angular.K,[core.h,core.k,core.x],null,null),(_l()(),core.qb(6,0,null,0,1,\"h1\",[],null,null,null,null,null)),(_l()(),core.Gb(7,null,[\"\",\"\"])),(_l()(),core.Gb(8,0,[\" \",\" \"]))],null,(function(_ck,_v){_ck(_v,7,0,_v.context.$implicit.name),_ck(_v,8,0,_v.context.$implicit[\"Most Recent Message\"].content)}))}function View_MessageListPage_0(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,7,\"ion-header\",[],null,null,null,ionic_angular_ngfactory.Q,ionic_angular_ngfactory.l)),core.pb(1,49152,null,0,ionic_angular.y,[core.h,core.k,core.x],null,null),(_l()(),core.qb(2,0,null,0,5,\"ion-toolbar\",[],null,null,null,ionic_angular_ngfactory.jb,ionic_angular_ngfactory.E)),core.pb(3,49152,null,0,ionic_angular.wb,[core.h,core.k,core.x],null,null),(_l()(),core.qb(4,0,null,0,3,\"ion-title\",[],null,null,null,ionic_angular_ngfactory.ib,ionic_angular_ngfactory.D)),core.pb(5,49152,null,0,ionic_angular.ub,[core.h,core.k,core.x],null,null),(_l()(),core.qb(6,0,null,0,1,\"h1\",[],null,null,null,null,null)),(_l()(),core.Gb(-1,null,[\"Messages\"])),(_l()(),core.qb(8,0,null,null,4,\"ion-content\",[[\"class\",\"ion-padding\"]],null,null,null,ionic_angular_ngfactory.N,ionic_angular_ngfactory.i)),core.pb(9,49152,null,0,ionic_angular.r,[core.h,core.k,core.x],{fullscreen:[0,\"fullscreen\"]},null),(_l()(),core.qb(10,0,null,0,2,\"div\",[[\"class\",\"actions\"]],null,null,null,null,null)),(_l()(),core.fb(16777216,null,null,1,null,View_MessageListPage_1)),core.pb(12,278528,null,0,common.h,[core.N,core.J,core.q],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,9,0,!0),_ck(_v,12,0,_co.conversations)}),null)}function View_MessageListPage_Host_0(_l){return core.Hb(0,[(_l()(),core.qb(0,0,null,null,1,\"app-message-list\",[],null,null,null,View_MessageListPage_0,RenderType_MessageListPage)),core.pb(1,114688,null,0,MessageListPage,[angular_fire_firestore.a,angular_fire_auth.a,router.m],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var MessageListPageNgFactory=core.mb(\"app-message-list\",MessageListPage,View_MessageListPage_Host_0,{},{},[]),fesm2015_forms=__webpack_require__(\"s7LF\");class MessageListPageRoutingModule{}__webpack_require__.d(__webpack_exports__,\"MessageListPageModuleNgFactory\",(function(){return MessageListPageModuleNgFactory}));var MessageListPageModuleNgFactory=core.nb(MessageListPageModule,[],(function(_l){return core.zb([core.Ab(512,core.j,core.Y,[[8,[router_ngfactory.a,MessageListPageNgFactory]],[3,core.j],core.v]),core.Ab(4608,common.k,common.j,[core.s,[2,common.q]]),core.Ab(4608,fesm2015_forms.l,fesm2015_forms.l,[]),core.Ab(4608,ionic_angular.a,ionic_angular.a,[core.x,core.g]),core.Ab(4608,ionic_angular.Ab,ionic_angular.Ab,[ionic_angular.a,core.j,core.p]),core.Ab(4608,ionic_angular.Db,ionic_angular.Db,[ionic_angular.a,core.j,core.p]),core.Ab(1073742336,common.b,common.b,[]),core.Ab(1073742336,fesm2015_forms.k,fesm2015_forms.k,[]),core.Ab(1073742336,fesm2015_forms.b,fesm2015_forms.b,[]),core.Ab(1073742336,ionic_angular.yb,ionic_angular.yb,[]),core.Ab(1073742336,router.o,router.o,[[2,router.t],[2,router.m]]),core.Ab(1073742336,MessageListPageRoutingModule,MessageListPageRoutingModule,[]),core.Ab(1073742336,MessageListPageModule,MessageListPageModule,[]),core.Ab(1024,router.k,(function(){return[[{path:\"\",component:MessageListPage}]]}),[])])}))}}]);","extractedComments":[]}