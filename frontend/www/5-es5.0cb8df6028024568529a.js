function _defineProperties(n,l){for(var e=0;e<l.length;e++){var t=l[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,l,e){return l&&_defineProperties(n.prototype,l),e&&_defineProperties(n,e),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{vep6:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J"),u=function n(){_classCallCheck(this,n)},i=e("pMnS"),a=e("MKJQ"),o=e("sZkV"),r=e("s7LF"),c=e("SVse"),s=e("2g2N"),b=e("n90K"),d=e("wj3C");e("LOEa");var g=function(){function n(l,e,t,u,i){_classCallCheck(this,n),this.router=l,this.firestore=e,this.auth=t,this.toastService=u,this.storageService=i,this.menu=[],this.review=!1,this.data={uid:"",Rating:3,Date:"","Posted By":"",Time:new Number,Comment:""},this.dh=""}return _createClass(n,[{key:"ngOnInit",value:function(){var n=this;this.dh=history.state["Dining Hall"],this.firestore.firestore.collection("Dining Halls").doc(this.dh).get().then((function(l){for(var e in l.data())n.firestore.firestore.collection("Dining Halls/"+n.dh+"/Meals").doc(l.data()[e]).get().then((function(l){n.menu.push(l.data())})).catch((function(n){console.dir(n)}))})).catch((function(n){console.dir(n)}))}},{key:"orderAction",value:function(n){var l=this,e=new Date,t={Time:e.getTime(),Date:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),uid:d.firebase.auth().currentUser.uid};this.firestore.firestore.collection("Dining Halls/"+this.dh+"/Meals/"+n+"/Order").doc().set(t).then((function(){l.toastService.presentToast("Order Placed")})).catch((function(n){console.dir(n)}))}},{key:"submit",value:function(n){var l=this,e=new Date;this.data.Time=e.getTime(),this.data.Date=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),this.auth.currentUser.then((function(e){l.data.uid=e.uid,l.storageService.get(e.uid).then((function(e){l.data["Posted By"]=e["Student Number"],l.firestore.firestore.collection("Dining Halls/"+l.dh+"/Meals/"+n+"/Comments").doc().set(l.data),l.firestore.firestore.collection("Dining Halls/"+l.dh+"/Meals/").doc(n).get().then((function(e){var t=e.data();t.ratings.push(l.data.Rating),t["Average Rating"]=0,t.ratings.forEach((function(n){t["Average Rating"]+=n})),t["Average Rating"]/=t.ratings.length,t.uid=l.data["Posted By"],l.firestore.firestore.collection("Dining Halls/"+l.dh+"/Meals/").doc(n).update({uid:t.uid,ratings:t.ratings,"Average Rating":t["Average Rating"]}).catch((function(n){console.dir(n)})),l.toastService.presentToast("Review submitted."),l.router.navigate(["main"])})).catch((function(n){console.dir("error",n)}))})).catch((function(n){console.dir("error",n)}))})).catch((function(n){console.dir("error",n)}))}}]),n}(),h=e("iInd"),p=e("wD+u"),f=e("VRCc"),m=t.ob({encapsulation:0,styles:[[".actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:9px;--box-shadow:none;--background:linear-gradient(60deg, #D4AF37 0%, #416 100%);font-size:12px}"]],data:{}});function C(n){return t.Hb(0,[(n()(),t.qb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,e){var t=!0,u=n.component;return"click"===l&&(t=0!=(u.review=!u.review)&&t),t}),a.G,a.b)),t.pb(2,49152,null,0,o.h,[t.h,t.k,t.x],{expand:[0,"expand"]},null),(n()(),t.Gb(-1,0,["Make Review"]))],(function(n,l){n(l,2,0,"block")}),null)}function v(n){return t.Hb(0,[(n()(),t.qb(0,0,null,null,34,"ion-list",[],null,null,null,a.V,a.q)),t.pb(1,49152,null,0,o.L,[t.h,t.k,t.x],null,null),(n()(),t.qb(2,0,null,0,15,"ion-item",[],null,null,null,a.T,a.o)),t.pb(3,49152,null,0,o.E,[t.h,t.k,t.x],null,null),(n()(),t.qb(4,0,null,0,4,"ion-label",[["position","stacked"]],null,null,null,a.U,a.p)),t.pb(5,49152,null,0,o.K,[t.h,t.k,t.x],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Write a short comment "])),(n()(),t.qb(7,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.Gb(-1,0,["(fewer than 50 charecters)"])),(n()(),t.qb(9,0,null,0,8,"ion-input",[["maxlength","50"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t.Cb(n,12)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,12)._handleInputEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.data.Comment=e)&&u),u}),a.S,a.n)),t.pb(10,540672,null,0,r.c,[],{maxlength:[0,"maxlength"]},null),t.Db(1024,null,r.d,(function(n){return[n]}),[r.c]),t.pb(12,4341760,null,0,o.Gb,[t.p,t.k],null,null),t.Db(1024,null,r.e,(function(n){return[n]}),[o.Gb]),t.pb(14,671744,null,0,r.j,[[8,null],[6,r.d],[8,null],[6,r.e]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,r.f,null,[r.j]),t.pb(16,16384,null,0,r.g,[[4,r.f]],null,null),t.pb(17,49152,null,0,o.D,[t.h,t.k,t.x],{maxlength:[0,"maxlength"],type:[1,"type"]},null),(n()(),t.qb(18,0,null,0,16,"ion-item",[],null,null,null,a.T,a.o)),t.pb(19,49152,null,0,o.E,[t.h,t.k,t.x],null,null),(n()(),t.qb(20,0,null,0,3,"ion-label",[["position","stacked"]],null,null,null,a.U,a.p)),t.pb(21,49152,null,0,o.K,[t.h,t.k,t.x],{position:[0,"position"]},null),(n()(),t.Gb(-1,0,["Rate the meal "])),(n()(),t.qb(23,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.qb(24,0,null,0,10,"ion-range",[["color","warning"],["max","5"],["min","1"],["pin","true"],["snaps",""],["step","1"],["value","3"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var u=!0,i=n.component;return"ionBlur"===l&&(u=!1!==t.Cb(n,25)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Cb(n,25)._handleChangeEvent(e.target)&&u),"ngModelChange"===l&&(u=!1!==(i.data.Rating=e)&&u),u}),a.Z,a.u)),t.pb(25,4341760,null,0,o.Fb,[t.p,t.k],null,null),t.Db(1024,null,r.e,(function(n){return[n]}),[o.Fb]),t.pb(27,671744,null,0,r.j,[[8,null],[8,null],[8,null],[6,r.e]],{model:[0,"model"]},{update:"ngModelChange"}),t.Db(2048,null,r.f,null,[r.j]),t.pb(29,16384,null,0,r.g,[[4,r.f]],null,null),t.pb(30,49152,null,0,o.W,[t.h,t.k,t.x],{color:[0,"color"],max:[1,"max"],min:[2,"min"],pin:[3,"pin"],snaps:[4,"snaps"],step:[5,"step"],value:[6,"value"]},null),(n()(),t.qb(31,0,null,0,1,"ion-icon",[["color","warning"],["name","thumbs-down"],["slot","start"]],null,null,null,a.R,a.m)),t.pb(32,49152,null,0,o.z,[t.h,t.k,t.x],{color:[0,"color"],name:[1,"name"]},null),(n()(),t.qb(33,0,null,0,1,"ion-icon",[["color","warning"],["name","thumbs-up"],["slot","end"]],null,null,null,a.R,a.m)),t.pb(34,49152,null,0,o.z,[t.h,t.k,t.x],{color:[0,"color"],name:[1,"name"]},null),(n()(),t.qb(35,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,e){var t=!0,u=n.component;return"click"===l&&(u.review=!u.review,t=!1!==u.submit(n.parent.context.$implicit.name)&&t),t}),a.G,a.b)),t.pb(36,49152,null,0,o.h,[t.h,t.k,t.x],{expand:[0,"expand"]},null),(n()(),t.Gb(-1,0,["Submit"]))],(function(n,l){var e=l.component;n(l,5,0,"stacked"),n(l,10,0,"50"),n(l,14,0,e.data.Comment),n(l,17,0,"50","text"),n(l,21,0,"stacked"),n(l,27,0,e.data.Rating),n(l,30,0,"warning","5","1","true","","1","3"),n(l,32,0,"warning","thumbs-down"),n(l,34,0,"warning","thumbs-up"),n(l,36,0,"block")}),(function(n,l){n(l,9,0,t.Cb(l,10).maxlength?t.Cb(l,10).maxlength:null,t.Cb(l,16).ngClassUntouched,t.Cb(l,16).ngClassTouched,t.Cb(l,16).ngClassPristine,t.Cb(l,16).ngClassDirty,t.Cb(l,16).ngClassValid,t.Cb(l,16).ngClassInvalid,t.Cb(l,16).ngClassPending),n(l,24,0,t.Cb(l,29).ngClassUntouched,t.Cb(l,29).ngClassTouched,t.Cb(l,29).ngClassPristine,t.Cb(l,29).ngClassDirty,t.Cb(l,29).ngClassValid,t.Cb(l,29).ngClassInvalid,t.Cb(l,29).ngClassPending)}))}function k(n){return t.Hb(0,[(n()(),t.qb(0,0,null,null,19,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t.qb(1,0,null,null,18,"ion-card",[],null,null,null,a.L,a.d)),t.pb(2,49152,null,0,o.j,[t.h,t.k,t.x],null,null),(n()(),t.qb(3,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),t.qb(4,0,null,0,4,"ion-card-header",[],null,null,null,a.J,a.f)),t.pb(5,49152,null,0,o.l,[t.h,t.k,t.x],null,null),(n()(),t.qb(6,0,null,0,2,"ion-card-title",[],null,null,null,a.K,a.g)),t.pb(7,49152,null,0,o.n,[t.h,t.k,t.x],null,null),(n()(),t.Gb(8,0,["",""])),(n()(),t.qb(9,0,null,0,4,"ion-card-content",[],null,null,null,a.I,a.e)),t.pb(10,49152,null,0,o.k,[t.h,t.k,t.x],null,null),(n()(),t.Gb(11,0,[" "," "])),(n()(),t.qb(12,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.Gb(13,0,[" Allergens: "," "])),(n()(),t.qb(14,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.orderAction(n.context.$implicit.name)&&t),t}),a.G,a.b)),t.pb(15,49152,null,0,o.h,[t.h,t.k,t.x],{expand:[0,"expand"]},null),(n()(),t.Gb(-1,0,["Order"])),(n()(),t.fb(16777216,null,0,1,null,C)),t.pb(18,16384,null,0,c.i,[t.N,t.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t.fb(0,[["reviewBlock",2]],0,0,null,v))],(function(n,l){var e=l.component;n(l,15,0,"block"),n(l,18,0,0==e.review,t.Cb(l,19))}),(function(n,l){n(l,3,0,t.ub(1,"",l.context.$implicit.image,"")),n(l,8,0,l.context.$implicit.name),n(l,11,0,l.context.$implicit.description),n(l,13,0,l.context.$implicit.allergens)}))}function x(n){return t.Hb(0,[(n()(),t.qb(0,0,null,null,5,"ion-content",[["class","ion-padding"]],null,null,null,a.N,a.i)),t.pb(1,49152,null,0,o.r,[t.h,t.k,t.x],{fullscreen:[0,"fullscreen"]},null),(n()(),t.qb(2,0,null,0,3,"ion-list",[],null,null,null,a.V,a.q)),t.pb(3,49152,null,0,o.L,[t.h,t.k,t.x],null,null),(n()(),t.fb(16777216,null,0,1,null,k)),t.pb(5,278528,null,0,c.h,[t.N,t.J,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var e=l.component;n(l,1,0,!0),n(l,5,0,e.menu)}),null)}var w=t.mb("app-meals",g,(function(n){return t.Hb(0,[(n()(),t.qb(0,0,null,null,1,"app-meals",[],null,null,null,x,m)),t.pb(1,114688,null,0,g,[h.m,p.a,f.a,s.a,b.a],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),q=function n(){_classCallCheck(this,n)};e.d(l,"MealsPageModuleNgFactory",(function(){return D}));var D=t.nb(u,[],(function(n){return t.zb([t.Ab(512,t.j,t.Y,[[8,[i.a,w]],[3,t.j],t.v]),t.Ab(4608,c.k,c.j,[t.s,[2,c.q]]),t.Ab(4608,r.l,r.l,[]),t.Ab(4608,o.a,o.a,[t.x,t.g]),t.Ab(4608,o.Ab,o.Ab,[o.a,t.j,t.p]),t.Ab(4608,o.Db,o.Db,[o.a,t.j,t.p]),t.Ab(1073742336,c.b,c.b,[]),t.Ab(1073742336,r.k,r.k,[]),t.Ab(1073742336,r.b,r.b,[]),t.Ab(1073742336,o.yb,o.yb,[]),t.Ab(1073742336,h.o,h.o,[[2,h.t],[2,h.m]]),t.Ab(1073742336,q,q,[]),t.Ab(1073742336,u,u,[]),t.Ab(1024,h.k,(function(){return[[{path:"",component:g}]]}),[])])}))}}]);