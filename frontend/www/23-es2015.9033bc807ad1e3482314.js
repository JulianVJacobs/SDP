(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"0mUY":function(n,l,t){"use strict";t.r(l);var u=t("8Y7J");class e{}var o=t("pMnS"),s=t("MKJQ"),i=t("sZkV"),a=t("SVse");class c{constructor(n,l,t){this.firestore=n,this.auth=l,this.router=t,this.conversations=[],this.users={}}ngOnInit(){this.auth.currentUser.then(n=>{this.firestore.firestore.collection("users/"+n.uid+"/Chats").get().then(n=>{n.forEach(n=>{n.ref.onSnapshot(l=>{var t={uid:"",name:"","Most Recent Message":""};t.uid=n.id,t["Most Recent Message"]=l.data().Messages[l.data().Messages.length-1],this.firestore.firestore.doc("users/"+n.id).get().then(l=>{t.name=l.data().Name+" "+l.data().Surname,null!=t["Most Recent Message"]&&(this.users[n.id]=t,this.conversations=Object.values(this.users))}).catch(n=>{console.dir(n)})})})}).catch(n=>{console.dir(n)})}).catch(n=>{console.dir(n)})}mainAction(n){this.router.navigateByUrl("message",{state:{recipient:n.Owner}})}}var r=t("wD+u"),b=t("VRCc"),h=t("iInd"),p=u.ob({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;color:#416;font-style:italic;font-family:cursive}.ion-padding[_ngcontent-%COMP%]{top:20%;margin-bottom:10%}.ion-padding[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:12px;color:#416}ion-button[_ngcontent-%COMP%]{position:absolute;width:80%;margin-left:5%;margin-bottom:3%;--background:#D4AF37}"]],data:{}});function g(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,8,"ion-item",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.mainAction(n.context.$implicit)&&u),u}),s.T,s.o)),u.pb(1,49152,null,0,i.E,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,1,"ion-thumbnail",[["slot","start"]],null,null,null,s.hb,s.C)),u.pb(3,49152,null,0,i.tb,[u.h,u.k,u.x],null,null),(n()(),u.qb(4,0,null,0,4,"ion-label",[],null,null,null,s.U,s.p)),u.pb(5,49152,null,0,i.K,[u.h,u.k,u.x],null,null),(n()(),u.qb(6,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),u.Gb(7,null,["",""])),(n()(),u.Gb(8,0,[" "," "]))],null,(function(n,l){n(l,7,0,l.context.$implicit.name),n(l,8,0,l.context.$implicit["Most Recent Message"].content)}))}function d(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,7,"ion-header",[],null,null,null,s.Q,s.l)),u.pb(1,49152,null,0,i.y,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,5,"ion-toolbar",[],null,null,null,s.jb,s.E)),u.pb(3,49152,null,0,i.wb,[u.h,u.k,u.x],null,null),(n()(),u.qb(4,0,null,0,3,"ion-title",[],null,null,null,s.ib,s.D)),u.pb(5,49152,null,0,i.ub,[u.h,u.k,u.x],null,null),(n()(),u.qb(6,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),u.Gb(-1,null,["Messages"])),(n()(),u.qb(8,0,null,null,4,"ion-content",[["class","ion-padding"]],null,null,null,s.N,s.i)),u.pb(9,49152,null,0,i.r,[u.h,u.k,u.x],{fullscreen:[0,"fullscreen"]},null),(n()(),u.qb(10,0,null,0,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),u.fb(16777216,null,null,1,null,g)),u.pb(12,278528,null,0,a.h,[u.N,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,9,0,!0),n(l,12,0,t.conversations)}),null)}function f(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,1,"app-message-list",[],null,null,null,d,p)),u.pb(1,114688,null,0,c,[r.a,b.a,h.m],null,null)],(function(n,l){n(l,1,0)}),null)}var m=u.mb("app-message-list",c,f,{},{},[]),M=t("s7LF");class A{}t.d(l,"MessageListPageModuleNgFactory",(function(){return k}));var k=u.nb(e,[],(function(n){return u.zb([u.Ab(512,u.j,u.Y,[[8,[o.a,m]],[3,u.j],u.v]),u.Ab(4608,a.k,a.j,[u.s,[2,a.q]]),u.Ab(4608,M.l,M.l,[]),u.Ab(4608,i.a,i.a,[u.x,u.g]),u.Ab(4608,i.Ab,i.Ab,[i.a,u.j,u.p]),u.Ab(4608,i.Db,i.Db,[i.a,u.j,u.p]),u.Ab(1073742336,a.b,a.b,[]),u.Ab(1073742336,M.k,M.k,[]),u.Ab(1073742336,M.b,M.b,[]),u.Ab(1073742336,i.yb,i.yb,[]),u.Ab(1073742336,h.o,h.o,[[2,h.t],[2,h.m]]),u.Ab(1073742336,A,A,[]),u.Ab(1073742336,e,e,[]),u.Ab(1024,h.k,(function(){return[[{path:"",component:c}]]}),[])])}))}}]);