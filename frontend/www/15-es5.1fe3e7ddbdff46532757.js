function _defineProperties(n,l){for(var t=0;t<l.length;t++){var u=l[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{mX50:function(n,l,t){"use strict";t.r(l);var u=t("8Y7J"),e=function n(){_classCallCheck(this,n)},o=t("pMnS"),i=t("MKJQ"),c=t("sZkV"),r=t("SVse"),s=t("n90K"),a=t("2g2N"),b=function(){function n(l,t,u,e,o,i){_classCallCheck(this,n),this.firestore=l,this.storage=t,this.auth=u,this.toast=e,this.storageService=o,this.router=i,this.items=[]}return _createClass(n,[{key:"message",value:function(n){this.router.navigateByUrl("message",{state:{recipient:n.Owner}})}},{key:"buy",value:function(n){var l=this;this.user["Amount Left"]>=n.Price?this.auth.currentUser.then((function(t){l.user["Amount Left"]=l.user["Amount Left"]-parseFloat(n.Price),l.firestore.firestore.collection("users").doc(t.uid).update({"Amount Left":l.user["Amount Left"]}).then((function(){l.firestore.firestore.collection("Books").doc(n.id).get().then((function(t){l.firestore.firestore.collection("Books").doc(n.id).delete().then((function(){})).catch((function(n){console.dir(n)}))})).catch((function(n){console.dir(n)})),l.firestore.firestore.collection("users").doc(n.Owner).get().then((function(t){var u=t.data();u["Amount Left"]+=parseFloat(n.Price),l.firestore.firestore.collection("users").doc(n.Owner).update({"Amount Left":u["Amount Left"]}).then((function(){l.toast.presentToast("Successful purchase"),l.ngOnInit()})).catch((function(n){console.dir(n)}))})).catch((function(n){console.dir(n)}))})).catch((function(n){console.dir(n)}))})).catch((function(n){console.dir(n)})):this.toast.presentToast("You don't have enough credits for that.")}},{key:"ngOnInit",value:function(){var n=this;this.auth.currentUser.then((function(l){n.storageService.get(l.uid).then((function(l){n.user=l,n.items=[],n.firestore.firestore.collection("Books").get().then((function(l){l.docs.forEach((function(l){var t=l.data();t.id=l.id,n.storage.storage.refFromURL(l.data()["Image-REF"][0]).getDownloadURL().then((function(n){t["Image-URL"]=n})).then((function(){n.auth.currentUser.then((function(l){t.Owner!=l.uid&&n.items.push(t)}))})).catch((function(n){console.dir(n)}))}))}))}))}))}}]),n}(),f=t("wD+u"),h=t("fMxG"),p=t("VRCc"),d=t("iInd"),g=u.ob({encapsulation:0,styles:[["ion-toolbar[_ngcontent-%COMP%]{position:absolute}ion-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;color:#d4af37;font-style:italic;font-family:cursive}ion-text[_ngcontent-%COMP%]{position:relative}ion-text[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;color:#416;font-style:italic;font-family:cursive;margin-top:30%}.actions[_ngcontent-%COMP%]{position:relative;margin-top:15%}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:9px;--box-shadow:none;--background:linear-gradient(60deg, #D4AF37 0%, #416 100%);text-transform:initial;font-size:12px}.actions[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:14px}"]],data:{}});function m(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),u.qb(1,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),u.Gb(2,null,["Balance: C ",""]))],null,(function(n,l){n(l,2,0,l.component.user["Amount Left"])}))}function k(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,16,"ion-card",[],null,null,null,i.L,i.d)),u.pb(1,49152,null,0,c.j,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,0,"img",[["alt",""]],[[8,"src",4]],[[null,"srcChange"]],(function(n,l,t){var u=!0;return"srcChange"===l&&(u=!1!==(n.context.$implicit["Image-URL"]=t)&&u),u}),null,null)),(n()(),u.qb(3,0,null,0,13,"ion-list",[],null,null,null,i.V,i.q)),u.pb(4,49152,null,0,c.L,[u.h,u.k,u.x],null,null),(n()(),u.qb(5,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),u.Gb(6,null,["",""])),(n()(),u.qb(7,0,null,0,3,"ion-label",[],null,null,null,i.U,i.p)),u.pb(8,49152,null,0,c.K,[u.h,u.k,u.x],null,null),(n()(),u.Gb(9,0,["C "," "])),(n()(),u.qb(10,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),u.qb(11,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.buy(n.context.$implicit)&&u),u}),i.G,i.b)),u.pb(12,49152,null,0,c.h,[u.h,u.k,u.x],{expand:[0,"expand"]},null),(n()(),u.Gb(-1,0,["Buy"])),(n()(),u.qb(14,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.message(n.context.$implicit)&&u),u}),i.G,i.b)),u.pb(15,49152,null,0,c.h,[u.h,u.k,u.x],{expand:[0,"expand"]},null),(n()(),u.Gb(-1,0,["Contact Seller"]))],(function(n,l){n(l,12,0,"block"),n(l,15,0,"block")}),(function(n,l){n(l,2,0,l.context.$implicit["Image-URL"]),n(l,6,0,l.context.$implicit.Title),n(l,9,0,l.context.$implicit.Price)}))}function x(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,11,"ion-header",[],null,null,null,i.Q,i.l)),u.pb(1,49152,null,0,c.y,[u.h,u.k,u.x],null,null),(n()(),u.qb(2,0,null,0,9,"ion-toolbar",[],null,null,null,i.jb,i.E)),u.pb(3,49152,null,0,c.wb,[u.h,u.k,u.x],null,null),(n()(),u.qb(4,0,null,0,3,"ion-title",[],null,null,null,i.ib,i.D)),u.pb(5,49152,null,0,c.ub,[u.h,u.k,u.x],null,null),(n()(),u.qb(6,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),u.Gb(-1,null,["Buy Books"])),(n()(),u.qb(8,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,i.H,i.c)),u.pb(9,49152,null,0,c.i,[u.h,u.k,u.x],null,null),(n()(),u.qb(10,0,null,0,1,"ion-menu-button",[["menu","main-menu"]],null,null,null,i.W,i.s)),u.pb(11,49152,null,0,c.O,[u.h,u.k,u.x],{menu:[0,"menu"]},null),(n()(),u.qb(12,0,null,null,10,"ion-content",[["class","ion-padding"]],null,null,null,i.N,i.i)),u.pb(13,49152,null,0,c.r,[u.h,u.k,u.x],{fullscreen:[0,"fullscreen"]},null),(n()(),u.qb(14,0,null,0,8,"ion-list",[],null,null,null,i.V,i.q)),u.pb(15,49152,null,0,c.L,[u.h,u.k,u.x],null,null),(n()(),u.qb(16,0,null,0,3,"ion-text",[],null,null,null,i.gb,i.B)),u.pb(17,49152,null,0,c.rb,[u.h,u.k,u.x],null,null),(n()(),u.fb(16777216,null,0,1,null,m)),u.pb(19,16384,null,0,r.i,[u.N,u.J],{ngIf:[0,"ngIf"]},null),(n()(),u.qb(20,0,null,0,2,"div",[["class","actions"]],null,null,null,null,null)),(n()(),u.fb(16777216,null,null,1,null,k)),u.pb(22,278528,null,0,r.h,[u.N,u.J,u.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,11,0,"main-menu"),n(l,13,0,!0),n(l,19,0,t.user),n(l,22,0,t.items)}),null)}var v=u.mb("app-buy-books",b,(function(n){return u.Hb(0,[(n()(),u.qb(0,0,null,null,1,"app-buy-books",[],null,null,null,x,g)),u.pb(1,114688,null,0,b,[f.a,h.a,p.a,a.a,s.a,d.m],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),C=t("s7LF"),A=function n(){_classCallCheck(this,n)};t.d(l,"BuyBooksPageModuleNgFactory",(function(){return q}));var q=u.nb(e,[],(function(n){return u.zb([u.Ab(512,u.j,u.Y,[[8,[o.a,v]],[3,u.j],u.v]),u.Ab(4608,r.k,r.j,[u.s,[2,r.q]]),u.Ab(4608,C.l,C.l,[]),u.Ab(4608,c.a,c.a,[u.x,u.g]),u.Ab(4608,c.Ab,c.Ab,[c.a,u.j,u.p]),u.Ab(4608,c.Db,c.Db,[c.a,u.j,u.p]),u.Ab(1073742336,r.b,r.b,[]),u.Ab(1073742336,C.k,C.k,[]),u.Ab(1073742336,C.b,C.b,[]),u.Ab(1073742336,c.yb,c.yb,[]),u.Ab(1073742336,d.o,d.o,[[2,d.t],[2,d.m]]),u.Ab(1073742336,A,A,[]),u.Ab(1073742336,e,e,[]),u.Ab(1024,d.k,(function(){return[[{path:"",component:b}]]}),[])])}))}}]);